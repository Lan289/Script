#!name = 节点检测工具
#!desc = 适用于Loon的节点检测工具
#!icon = https://raw.githubusercontent.com/black2c7/TheMagic-Icons/main/Icons/Boom.png
#!category: 引用或修改 KOP-XIAO xream keywos wuhu_zzz 整点猫咪 脚本
#!date = 2023-05-05 1:20:34

[Rule]
DOMAIN-SUFFIX,speedtest.cn,DIRECT
DOMAIN-SUFFIX,ip.im,DIRECT
DOMAIN-SUFFIX,ip.plus,DIRECT

[Script]
generic script-path = https://raw.githubusercontent.com/Lan289/Script/master/Loon/NodeDetectionTool/LocationDetection.js, timeout = 10, tag = 地理位置查询, img-url=cursorarrow.rays.system

generic script-path = https://raw.githubusercontent.com/Lan289/Script/master/Loon/NodeDetectionTool/NodeUnlockDetection.js, timeout=20, tag = 节点解锁查询, img-url=lock.rotation.open.system

generic script-path = https://raw.githubusercontent.com/Lan289/Script/master/Loon/NodeDetectionTool/NodeLinkCheck.js, tag = 代理链路检测, img-url=shuffle.circle.system

generic script-path = https://raw.githubusercontent.com/Lan289/Script/master/Loon/NodeDetectionTool/network-info.js, timeout=20, tag = 入口落地查询, img-url=globe.asia.australia.system

# Request
http-request ^https?:\/\/net-lsp-x\.com script-path=https://raw.githubusercontent.com/xream/scripts/main/surge/modules/network-info/net-lsp-x.js, timeout=120, tag=网络信息请求 𝕏

# Event
network-changed script-path=https://raw.githubusercontent.com/xream/scripts/main/surge/modules/network-info/net-lsp-x.js, timeout=120, tag=网络信息变化 𝕏, argument="TYPE=EVENT&icon=globe.asia.australia&icon-color=#6699FF&LAN=0&SSID=0&IPv6=0&MASK=0&DOMESTIC_IPv4=spcn&DOMESTIC_IPv6=ddnspod&LANDING_IPv4=ipapi&LANDING_IPv6=ipsb&PRIVACY=0&FLAG=1&ENTRANCE_DELAY=0&EVENT_DELAY=3"

# Interaction
generic script-path=https://raw.githubusercontent.com/xream/scripts/main/surge/modules/network-info/net-lsp-x.js, timeout=120, tag=网络信息查询, img-url=location.circle.system

[MITM]
hostname = net-lsp-x.com
